{"pageProps":{"metaData":{"title":"Oracle SQL Group by functions","created":"Tue Jun 01 2021 13:05:00 GMT+0000 (Coordinated Universal Time)","lastUpdated":"Tue Jun 01 2021 13:05:00 GMT+0000 (Coordinated Universal Time)","tags":["SQL","Oracle DB"],"published":true,"labels":["SQL"],"description":"Explanations of how you can apply group functions and their differences like ROLLUP, GROUPING SETS, CUBE.","languages":["sql"]},"filename":"sqlGroupFuncitons","content":"\n# Oracle group by functions\n\nIf you want to follow along you can use this query for getting the same table as the exercise\n\n```sample\n{\n    \"type\": \"sample\",\n    \"items\": [\n        {\n            \"lang\": \"sql\",\n            \"type\": \"code\",\n            \"value\": \"create table bricks (\\n  brick_id integer,\\n  colour   varchar2(10),\\n  shape    varchar2(10),\\n  weight   integer\\n);\\n\\ninsert into bricks values ( 1, 'blue', 'cube', 1 );\\ninsert into bricks values ( 2, 'blue', 'pyramid', 2 );\\ninsert into bricks values ( 3, 'red', 'cube', 1 );\\ninsert into bricks values ( 4, 'red', 'cube', 2 );\\ninsert into bricks values ( 5, 'red', 'pyramid', 3 );\\ninsert into bricks values ( 6, 'green', 'pyramid', 1 );\\n\\ncommit;\",\n            \"meta\": null,\n            \"label\": \"SQL\"\n        }\n    ]\n}\n```\n\nGroup by functions let us analyze information on a table with a single query, for example using the following table.\n\n| BRICK_ID \t| COLOUR \t| SHAPE   \t| WEIGHT \t|\n|----------\t|-----------|-----------|-----------|\n| 1        \t| blue   \t| cube    \t| 1      \t|\n| 2        \t| blue   \t| pyramid \t| 2      \t|\n| 3        \t| red    \t| cube    \t| 1      \t|\n| 4        \t| red    \t| cube    \t| 2      \t|\n| 5        \t| red    \t| pyramid \t| 3      \t|\n| 6        \t| green  \t| pyramid \t| 1      \t|\n\nWe can group by colour and get the sum of the weight of all the figures of each colour\n\n```sample\n{\n    \"type\": \"sample\",\n    \"items\": [\n        {\n            \"lang\": \"sql\",\n            \"type\": \"code\",\n            \"value\": \"SELECT colour, SUM(weight)\\nFROM bricks\\nGROUP BY colour;\",\n            \"meta\": null,\n            \"label\": \"SQL\"\n        }\n    ]\n}\n```\n\nThe result is:\n\n|COLOUR |SUM(WEIGHT)    |\n|------ |-------------- |\n|red    | 6             |\n|green  | 1             |\n|blue   | 3             |\n\nBut then imagine that you want to group by but now by shape but also you want to see the group by colour so we can use GROUPING SETS()\n\n```sample\n{\n    \"type\": \"sample\",\n    \"items\": [\n        {\n            \"lang\": \"sql\",\n            \"type\": \"code\",\n            \"value\": \"SELECT colour, shape, SUM(weight)\\nFROM bricks\\nGROUP BY GROUPING SETS(colour, shape);\",\n            \"meta\": null,\n            \"label\": \"SQL\"\n        }\n    ]\n}\n```\n\nSo now with these query we obtain the following information.\n\n|COLOUR|SHAPE   |\tSUM(WEIGHT)  |\n|------|--------|----------------|\n| -    |cube    |\t4            |\n| -    |pyramid |\t6            |\n|green |\t - \t|   1            |\n|blue  | - \t    |   3            |\n|red   | - \t    |   6            |\n"},"__N_SSG":true}