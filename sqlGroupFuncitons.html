<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Oracle SQL Group by functions</title><meta title="description" content="Explanations of how you can apply group functions and their differences like ROLLUP, GROUPING SETS, CUBE."/><meta name="next-head-count" content="4"/><link rel="preload" href="/code-sampler/_next/static/css/d19ec755746e815789fd.css" as="style"/><link rel="stylesheet" href="/code-sampler/_next/static/css/d19ec755746e815789fd.css" data-n-g=""/><link rel="preload" href="/code-sampler/_next/static/css/b1fafcb60d3bca674cc7.css" as="style"/><link rel="stylesheet" href="/code-sampler/_next/static/css/b1fafcb60d3bca674cc7.css" data-n-p=""/><noscript data-n-css=""></noscript><link rel="preload" href="/code-sampler/_next/static/chunks/webpack-af8d060cb140570bcfb2.js" as="script"/><link rel="preload" href="/code-sampler/_next/static/chunks/framework-c179ed8d0295df0a6019.js" as="script"/><link rel="preload" href="/code-sampler/_next/static/chunks/main-31044fa5127c3a8635a6.js" as="script"/><link rel="preload" href="/code-sampler/_next/static/chunks/pages/_app-5a1c69e24fc8bd9a3b27.js" as="script"/><link rel="preload" href="/code-sampler/_next/static/chunks/9f96d65d-d7ea76c4369eefce9527.js" as="script"/><link rel="preload" href="/code-sampler/_next/static/chunks/346-4e343dc8b86b80074131.js" as="script"/><link rel="preload" href="/code-sampler/_next/static/chunks/pages/%5Bslug%5D-e8c61563ddededdad196.js" as="script"/></head><body><div id="__next"><div aria-label="Code Sampler Navbar"><nav aria-label="Bar Menu" role="menubar" class="Navbar_navbarColor__12AkY navbar navbar-expand navbar-light"><span role="none" class="text-white btn navbar-brand"><a role="menuitem" aria-label="Code Sampler" tabindex="0" aria-haspopup="false"><h6 class="mb-1">Code Sampler</h6></a></span><button type="button" aria-label="Toggle navigation" class="navbar-toggler collapsed"><span class="navbar-toggler-icon"></span></button><div class="justify-content-end navbar-collapse collapse"><div class="Navbar_iconContainer__1cCcq"><a role="menuitem" aria-label="favorites" aria-haspopup="false" href="/code-sampler/favorites"><span class="fa fa-bookmark-o fa-lg" aria-hidden="true"></span></a></div><div class="Navbar_iconContainer__1cCcq"><button role="menuitem" aria-label="settings" aria-haspopup="false" style="background:none;border:none" area-hidden="true" class=" fa fa-gear fa-lg text-light"></button></div></div></nav></div><nav class="Searchbar_searchBarColor__1PvUv navbar navbar-expand navbar-light"><div class="d-flex justify-content-center container-md"><div class="w-50 pt-2 pb-2 mr-2 Searchbar_searchBar__1GGul input-group"><input type="text" placeholder="How to.." aria-label="Search" value="" role="textbox" class="border-0 shadow-none  form-control"/><div class="input-group-append"><span class="bg-white border-0 rounded-right  input-group-text" aria-label="Search action" role="button" tabindex="0"><span class="fa fa-search fa-sm" style="cursor:pointer"></span></span></div><div class="bg-white ResultsDropDown_resultsDropDown__2mDjW scroll "><ul></ul></div></div><div id="testhello" class="dropdown"><button aria-haspopup="true" aria-expanded="false" style="background-color:transparent;box-shadow:none" aria-label="filter-button" type="button" class="border-0 px-1 dropdown-toggle btn btn-primary"><span class="fa fa-filter fa-lg text-light" aria-hidden="true"></span></button></div></div></nav><div style="width:80%;margin:auto;margin-bottom:3rem" class="text-light"><div class="container-fluid"><div class="row"><div class="p-0 col-md-8 col-sm-10 col-9"><h1 class="CodeSample_sampleTitle__2c3SO">Oracle group by functions</h1><div class="d-flex flex-row flex-wrap mb-2 Tags_tags__1ysPp"><p class="text-capitalize mb-1 mr-1 text-truncate px-2 Tags_tag__2sw_z">SQL</p><p class="text-capitalize mb-1 mr-1 text-truncate px-2 Tags_tag__2sw_z">Oracle DB</p></div></div><div class="d-flex justify-content-end p-0 col-md-4 col-sm-2 col-3"><button data-bookmark="true" aria-label="favorite bookmark selected" tabindex="0" style="background-color:transparent" class="border-0"><span class="fa fa-bookmark-o fa-lg fa-2x text-light CodeSample_iconButton__MhFhg" aria-hidden="true"></span></button></div></div></div>
<p>If you want to follow along you can use this query for getting the same table as the exercise</p>
<pre><div><ul class="Tabs_tabsMenu__jmQ5d" role="list"><li role="listitem" class="Tabs_tabsLabel__2d023 Tabs_active__3-xYk"><button tabindex="0" role="button" style="background-color:transparent;border:0;padding:0"><a style="font-size:.9rem">SQL</a></button></li></ul><div><div class="CodeSnippets_iconGroup__1DfBn my-2 mx-2"><button aria-label="toggle theme" tabindex="0" class="CodeSnippets_iconButton__1yR1z"><span class="fa fa-sun-o fa-lg text-dark" aria-hidden="true"></span></button><button title="" type="button" class="CodeSnippets_iconButton__1yR1z" data-clipboard-text="create table bricks (
  brick_id integer,
  colour   varchar2(10),
  shape    varchar2(10),
  weight   integer
);

insert into bricks values ( 1, &#x27;blue&#x27;, &#x27;cube&#x27;, 1 );
insert into bricks values ( 2, &#x27;blue&#x27;, &#x27;pyramid&#x27;, 2 );
insert into bricks values ( 3, &#x27;red&#x27;, &#x27;cube&#x27;, 1 );
insert into bricks values ( 4, &#x27;red&#x27;, &#x27;cube&#x27;, 2 );
insert into bricks values ( 5, &#x27;red&#x27;, &#x27;pyramid&#x27;, 3 );
insert into bricks values ( 6, &#x27;green&#x27;, &#x27;pyramid&#x27;, 1 );

commit;"><div aria-label="copy to clipboard" tabindex="0"><span class="fa fa-copy fa-lg  text-dark" aria-hidden="true"></span></div></button></div><pre style="display:block;overflow-x:auto;background:#fefefe;color:#545454;padding:0.5em;margin-top:0;margin-bottom:0;border:1px black solid;border-top:none;border-bottom-left-radius:5px;border-bottom-right-radius:5px;min-height:3.2rem"><code class="language-sql" style="white-space:pre"><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">1</span><span style="color:#7928a1">create</span><span> </span><span style="color:#7928a1">table</span><span> bricks (
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">2</span><span>  brick_id </span><span style="color:#aa5d00">integer</span><span>,
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">3</span><span>  colour   varchar2(</span><span style="color:#aa5d00">10</span><span>),
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">4</span><span>  shape    varchar2(</span><span style="color:#aa5d00">10</span><span>),
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">5</span><span>  weight   </span><span style="color:#aa5d00">integer</span><span>
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">6</span>);
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">7</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">8</span><span></span><span style="color:#7928a1">insert</span><span> </span><span style="color:#7928a1">into</span><span> bricks </span><span style="color:#7928a1">values</span><span> ( </span><span style="color:#aa5d00">1</span><span>, </span><span style="color:#008000">&#x27;blue&#x27;</span><span>, </span><span style="color:#008000">&#x27;cube&#x27;</span><span>, </span><span style="color:#aa5d00">1</span><span> );
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">9</span><span></span><span style="color:#7928a1">insert</span><span> </span><span style="color:#7928a1">into</span><span> bricks </span><span style="color:#7928a1">values</span><span> ( </span><span style="color:#aa5d00">2</span><span>, </span><span style="color:#008000">&#x27;blue&#x27;</span><span>, </span><span style="color:#008000">&#x27;pyramid&#x27;</span><span>, </span><span style="color:#aa5d00">2</span><span> );
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">10</span><span></span><span style="color:#7928a1">insert</span><span> </span><span style="color:#7928a1">into</span><span> bricks </span><span style="color:#7928a1">values</span><span> ( </span><span style="color:#aa5d00">3</span><span>, </span><span style="color:#008000">&#x27;red&#x27;</span><span>, </span><span style="color:#008000">&#x27;cube&#x27;</span><span>, </span><span style="color:#aa5d00">1</span><span> );
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">11</span><span></span><span style="color:#7928a1">insert</span><span> </span><span style="color:#7928a1">into</span><span> bricks </span><span style="color:#7928a1">values</span><span> ( </span><span style="color:#aa5d00">4</span><span>, </span><span style="color:#008000">&#x27;red&#x27;</span><span>, </span><span style="color:#008000">&#x27;cube&#x27;</span><span>, </span><span style="color:#aa5d00">2</span><span> );
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">12</span><span></span><span style="color:#7928a1">insert</span><span> </span><span style="color:#7928a1">into</span><span> bricks </span><span style="color:#7928a1">values</span><span> ( </span><span style="color:#aa5d00">5</span><span>, </span><span style="color:#008000">&#x27;red&#x27;</span><span>, </span><span style="color:#008000">&#x27;pyramid&#x27;</span><span>, </span><span style="color:#aa5d00">3</span><span> );
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">13</span><span></span><span style="color:#7928a1">insert</span><span> </span><span style="color:#7928a1">into</span><span> bricks </span><span style="color:#7928a1">values</span><span> ( </span><span style="color:#aa5d00">6</span><span>, </span><span style="color:#008000">&#x27;green&#x27;</span><span>, </span><span style="color:#008000">&#x27;pyramid&#x27;</span><span>, </span><span style="color:#aa5d00">1</span><span> );
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">14</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">15</span><span></span><span style="color:#7928a1">commit</span><span>;</span></code></pre></div></div></pre>
<p>Group by functions let us analyze information on a table with a single query, for example using the following table.</p>
<table border="1" cellPadding="5" style="margin-bottom:1rem"><thead><tr><th>BRICK_ID</th><th>COLOUR</th><th>SHAPE</th><th>WEIGHT</th></tr></thead><tbody><tr><td>1</td><td>blue</td><td>cube</td><td>1</td></tr><tr><td>2</td><td>blue</td><td>pyramid</td><td>2</td></tr><tr><td>3</td><td>red</td><td>cube</td><td>1</td></tr><tr><td>4</td><td>red</td><td>cube</td><td>2</td></tr><tr><td>5</td><td>red</td><td>pyramid</td><td>3</td></tr><tr><td>6</td><td>green</td><td>pyramid</td><td>1</td></tr></tbody></table>
<p>We can group by colour and get the sum of the weight of all the figures of each colour</p>
<pre><div><ul class="Tabs_tabsMenu__jmQ5d" role="list"><li role="listitem" class="Tabs_tabsLabel__2d023 Tabs_active__3-xYk"><button tabindex="0" role="button" style="background-color:transparent;border:0;padding:0"><a style="font-size:.9rem">SQL</a></button></li></ul><div><div class="CodeSnippets_iconGroup__1DfBn my-2 mx-2"><button aria-label="toggle theme" tabindex="0" class="CodeSnippets_iconButton__1yR1z"><span class="fa fa-sun-o fa-lg text-dark" aria-hidden="true"></span></button><button title="" type="button" class="CodeSnippets_iconButton__1yR1z" data-clipboard-text="SELECT colour, SUM(weight)
FROM bricks
GROUP BY colour;"><div aria-label="copy to clipboard" tabindex="0"><span class="fa fa-copy fa-lg  text-dark" aria-hidden="true"></span></div></button></div><pre style="display:block;overflow-x:auto;background:#fefefe;color:#545454;padding:0.5em;margin-top:0;margin-bottom:0;border:1px black solid;border-top:none;border-bottom-left-radius:5px;border-bottom-right-radius:5px;min-height:3.2rem"><code class="language-sql" style="white-space:pre"><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">1</span><span style="color:#7928a1">SELECT</span><span> colour, </span><span style="color:#aa5d00">SUM</span><span>(weight)
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">2</span><span></span><span style="color:#7928a1">FROM</span><span> bricks
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">3</span><span></span><span style="color:#7928a1">GROUP</span><span> </span><span style="color:#7928a1">BY</span><span> colour;</span></code></pre></div></div></pre>
<p>The result is:</p>
<table border="1" cellPadding="5" style="margin-bottom:1rem"><thead><tr><th>COLOUR</th><th>SUM(WEIGHT)</th></tr></thead><tbody><tr><td>red</td><td>6</td></tr><tr><td>green</td><td>1</td></tr><tr><td>blue</td><td>3</td></tr></tbody></table>
<p>But then imagine that you want to group by but now by shape but also you want to see the group by colour so we can use GROUPING SETS()</p>
<pre><div><ul class="Tabs_tabsMenu__jmQ5d" role="list"><li role="listitem" class="Tabs_tabsLabel__2d023 Tabs_active__3-xYk"><button tabindex="0" role="button" style="background-color:transparent;border:0;padding:0"><a style="font-size:.9rem">SQL</a></button></li></ul><div><div class="CodeSnippets_iconGroup__1DfBn my-2 mx-2"><button aria-label="toggle theme" tabindex="0" class="CodeSnippets_iconButton__1yR1z"><span class="fa fa-sun-o fa-lg text-dark" aria-hidden="true"></span></button><button title="" type="button" class="CodeSnippets_iconButton__1yR1z" data-clipboard-text="SELECT colour, shape, SUM(weight)
FROM bricks
GROUP BY GROUPING SETS(colour, shape);"><div aria-label="copy to clipboard" tabindex="0"><span class="fa fa-copy fa-lg  text-dark" aria-hidden="true"></span></div></button></div><pre style="display:block;overflow-x:auto;background:#fefefe;color:#545454;padding:0.5em;margin-top:0;margin-bottom:0;border:1px black solid;border-top:none;border-bottom-left-radius:5px;border-bottom-right-radius:5px;min-height:3.2rem"><code class="language-sql" style="white-space:pre"><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">1</span><span style="color:#7928a1">SELECT</span><span> colour, shape, </span><span style="color:#aa5d00">SUM</span><span>(weight)
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">2</span><span></span><span style="color:#7928a1">FROM</span><span> bricks
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">3</span><span></span><span style="color:#7928a1">GROUP</span><span> </span><span style="color:#7928a1">BY</span><span> </span><span style="color:#7928a1">GROUPING</span><span> SETS(colour, shape);</span></code></pre></div></div></pre>
<p>So now with these query we obtain the following information.</p>
<table border="1" cellPadding="5" style="margin-bottom:1rem"><thead><tr><th>COLOUR</th><th>SHAPE</th><th>SUM(WEIGHT)</th></tr></thead><tbody><tr><td>-</td><td>cube</td><td>4</td></tr><tr><td>-</td><td>pyramid</td><td>6</td></tr><tr><td>green</td><td>-</td><td>1</td></tr><tr><td>blue</td><td>-</td><td>3</td></tr><tr><td>red</td><td>-</td><td>6</td></tr></tbody></table></div><div style="position:fixed;top:4rem;right:2rem"></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"metaData":{"title":"Oracle SQL Group by functions","created":"Tue Jun 01 2021 13:05:00 GMT+0000 (Coordinated Universal Time)","lastUpdated":"Tue Jun 01 2021 13:05:00 GMT+0000 (Coordinated Universal Time)","tags":["SQL","Oracle DB"],"published":true,"labels":["SQL"],"description":"Explanations of how you can apply group functions and their differences like ROLLUP, GROUPING SETS, CUBE.","languages":["sql"]},"filename":"sqlGroupFuncitons","content":"\n# Oracle group by functions\n\nIf you want to follow along you can use this query for getting the same table as the exercise\n\n```sample\n{\n    \"type\": \"sample\",\n    \"items\": [\n        {\n            \"lang\": \"sql\",\n            \"type\": \"code\",\n            \"value\": \"create table bricks (\\n  brick_id integer,\\n  colour   varchar2(10),\\n  shape    varchar2(10),\\n  weight   integer\\n);\\n\\ninsert into bricks values ( 1, 'blue', 'cube', 1 );\\ninsert into bricks values ( 2, 'blue', 'pyramid', 2 );\\ninsert into bricks values ( 3, 'red', 'cube', 1 );\\ninsert into bricks values ( 4, 'red', 'cube', 2 );\\ninsert into bricks values ( 5, 'red', 'pyramid', 3 );\\ninsert into bricks values ( 6, 'green', 'pyramid', 1 );\\n\\ncommit;\",\n            \"meta\": null,\n            \"label\": \"SQL\"\n        }\n    ]\n}\n```\n\nGroup by functions let us analyze information on a table with a single query, for example using the following table.\n\n| BRICK_ID \t| COLOUR \t| SHAPE   \t| WEIGHT \t|\n|----------\t|-----------|-----------|-----------|\n| 1        \t| blue   \t| cube    \t| 1      \t|\n| 2        \t| blue   \t| pyramid \t| 2      \t|\n| 3        \t| red    \t| cube    \t| 1      \t|\n| 4        \t| red    \t| cube    \t| 2      \t|\n| 5        \t| red    \t| pyramid \t| 3      \t|\n| 6        \t| green  \t| pyramid \t| 1      \t|\n\nWe can group by colour and get the sum of the weight of all the figures of each colour\n\n```sample\n{\n    \"type\": \"sample\",\n    \"items\": [\n        {\n            \"lang\": \"sql\",\n            \"type\": \"code\",\n            \"value\": \"SELECT colour, SUM(weight)\\nFROM bricks\\nGROUP BY colour;\",\n            \"meta\": null,\n            \"label\": \"SQL\"\n        }\n    ]\n}\n```\n\nThe result is:\n\n|COLOUR |SUM(WEIGHT)    |\n|------ |-------------- |\n|red    | 6             |\n|green  | 1             |\n|blue   | 3             |\n\nBut then imagine that you want to group by but now by shape but also you want to see the group by colour so we can use GROUPING SETS()\n\n```sample\n{\n    \"type\": \"sample\",\n    \"items\": [\n        {\n            \"lang\": \"sql\",\n            \"type\": \"code\",\n            \"value\": \"SELECT colour, shape, SUM(weight)\\nFROM bricks\\nGROUP BY GROUPING SETS(colour, shape);\",\n            \"meta\": null,\n            \"label\": \"SQL\"\n        }\n    ]\n}\n```\n\nSo now with these query we obtain the following information.\n\n|COLOUR|SHAPE   |\tSUM(WEIGHT)  |\n|------|--------|----------------|\n| -    |cube    |\t4            |\n| -    |pyramid |\t6            |\n|green |\t - \t|   1            |\n|blue  | - \t    |   3            |\n|red   | - \t    |   6            |\n"},"__N_SSG":true},"page":"/[slug]","query":{"slug":"sqlGroupFuncitons"},"buildId":"4nCtHWCO-bb2mAidd8rFH","assetPrefix":"/code-sampler","isFallback":false,"gsp":true}</script><script nomodule="" src="/code-sampler/_next/static/chunks/polyfills-7b08e4c67f4f1b892f4b.js"></script><script src="/code-sampler/_next/static/chunks/webpack-af8d060cb140570bcfb2.js" async=""></script><script src="/code-sampler/_next/static/chunks/framework-c179ed8d0295df0a6019.js" async=""></script><script src="/code-sampler/_next/static/chunks/main-31044fa5127c3a8635a6.js" async=""></script><script src="/code-sampler/_next/static/chunks/pages/_app-5a1c69e24fc8bd9a3b27.js" async=""></script><script src="/code-sampler/_next/static/chunks/9f96d65d-d7ea76c4369eefce9527.js" async=""></script><script src="/code-sampler/_next/static/chunks/346-4e343dc8b86b80074131.js" async=""></script><script src="/code-sampler/_next/static/chunks/pages/%5Bslug%5D-e8c61563ddededdad196.js" async=""></script><script src="/code-sampler/_next/static/4nCtHWCO-bb2mAidd8rFH/_buildManifest.js" async=""></script><script src="/code-sampler/_next/static/4nCtHWCO-bb2mAidd8rFH/_ssgManifest.js" async=""></script></body></html>